diff -urN samba-2.2.0.org/source/Makefile.in samba-2.2.0/source/Makefile.in
--- samba-2.2.0.org/source/Makefile.in	Wed Apr 18 01:27:35 2001
+++ samba-2.2.0/source/Makefile.in	Wed Apr 18 01:48:43 2001
@@ -50,7 +50,7 @@
 CONFIGFILE = $(CONFIGDIR)/smb.conf
 LMHOSTSFILE = $(CONFIGDIR)/lmhosts
 DRIVERFILE = $(CONFIGDIR)/printers.def
-PASSWD_PROGRAM = /bin/passwd
+PASSWD_PROGRAM = /usr/bin/passwd
 # This is where smbpasswd et al go
 PRIVATEDIR = @privatedir@
 
diff -urN samba-2.2.0.org/source/configure.in samba-2.2.0/source/configure.in
--- samba-2.2.0.org/source/configure.in	Wed Apr 18 01:27:35 2001
+++ samba-2.2.0/source/configure.in	Wed Apr 18 01:48:11 2001
@@ -665,6 +665,11 @@
 fi
 
 #
+# Check for yp_get_default_domain in -lnsl (linux glibc2.1)
+#
+AC_LIBTESTFUNC(nsl, yp_get_default_domain)
+
+#
 # Check for the functions putprpwnam, set_auth_parameters,
 # getspnam, bigcrypt and getprpwnam in -lsec and -lsecurity
 # Needed for OSF1 and HPUX.
@@ -1613,7 +1618,7 @@
   yes)
     AC_MSG_RESULT(yes)
     AC_DEFINE(WITH_PAM)
-    LIBS="$LIBS -lpam"
+    LIBS="$LIBS -ldl -lpam -lpamc"
     ;;
   *)
     AC_MSG_RESULT(no)
@@ -1712,7 +1717,7 @@
   yes)
     AC_MSG_RESULT(yes)
     AC_DEFINE(WITH_SSL)
-    withval="/usr/local/ssl"     # default
+    withval="/usr"     # default
 
     if test "${with_sslinc+set}" = set; then
 
@@ -1720,12 +1725,11 @@
 	case "$withval" in
 	yes|no)
 	  echo "configure: warning: --with-sslinc called without argument - will use default" 1>&w
-	  CFLAGS="-I/usr/local/ssl/include $CFLAGS"
+	  CFLAGS="-I/usr/include/openssl $CFLAGS"
 	  LIBS="-lssl -lcrypto $LIBS"
-	  LDFLAGS="=L/usr/local/ssl/lib $LDFLAGS"
 	;;
         * )
-          CFLAGS="-I${withval}/include $CFLAGS"
+          CFLAGS="-I${withval}/include/openssl $CFLAGS"
 	  LIBS="-lssl -lcrypto $LIBS"
   	  LDFLAGS="-L${withval}/lib $LDFLAGS"
 	;;
diff -urN samba-2.2.0.org/source/smbwrapper/smbsh.in samba-2.2.0/source/smbwrapper/smbsh.in
--- samba-2.2.0.org/source/smbwrapper/smbsh.in	Wed Apr 18 01:27:40 2001
+++ samba-2.2.0/source/smbwrapper/smbsh.in	Wed Apr 18 01:48:11 2001
@@ -1,6 +1,6 @@
 #! /bin/sh
 
-SMBW_LIBDIR=${SMBW_LIBDIR-@builddir@/smbwrapper}
+SMBW_LIBDIR=${SMBW_LIBDIR-/lib/security}
 
 if [ ! -f ${SMBW_LIBDIR}/smbwrapper.so ]; then
     echo You need to set LIBDIR in smbsh
